## API Report File for "@interaqt/runtime"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { Activity } from '@interaqt/shared';
import { ActivityGroupInstanceType } from '@interaqt/shared';
import { ActivityGroupPublicType } from '@interaqt/shared';
import { ActivityInstanceType } from '@interaqt/shared';
import { AsyncDatabase } from 'promised-sqlite3';
import { Atom } from 'rata';
import { BoolExp } from '@interaqt/shared';
import { BoolExpressionRawData } from '@interaqt/shared';
import { Concept } from '@interaqt/shared';
import { ConceptInstance } from '@interaqt/shared';
import { createClass } from '@interaqt/shared';
import { Entity } from '@interaqt/shared';
import { EntityAttributive } from '@interaqt/shared';
import { GatewayInstanceType } from '@interaqt/shared';
import { GatewayPublicType } from '@interaqt/shared';
import { InertKlassInstance } from '@interaqt/shared';
import { Interaction } from '@interaqt/shared';
import { InteractionInstanceType } from '@interaqt/shared';
import { InteractionPublicType } from '@interaqt/shared';
import { Klass } from '@interaqt/shared';
import { KlassInstance } from '@interaqt/shared';
import { MatchExpressionData } from '@interaqt/storage';
import { Property } from '@interaqt/shared';
import { PropertyTypes } from '@interaqt/shared';
import { ReactiveKlassInstance } from '@interaqt/shared';
import { Relation } from '@interaqt/shared';
import { RunResult } from 'sqlite3';
import { TransferPublicType } from '@interaqt/shared';
import { UserAttributive } from '@interaqt/shared';

// @public (undocumented)
export const activityEntity: InertKlassInstance<    {
name: {
type: "string";
collection: false;
required: true;
constraints: {
nameFormat({ name }: {
name: Atom<string>;
}): Atom<boolean>;
};
};
computedData: {
type: Klass<any>[];
collection: false;
required: false;
};
properties: {
type: Klass<    {
name: {
type: "string";
required: true;
collection: false;
constraints: {
format({ name }: {
name: Atom<string>;
}): Atom<boolean>;
length({ name }: {
name: Atom<string>;
}): Atom<boolean>;
};
};
type: {
type: "string";
required: true;
collection: false;
options: PropertyTypes[];
};
collection: {
type: "boolean";
required: true;
collection: false;
defaultValue(): boolean;
};
args: {
computedType: (values: {
type: PropertyTypes;
}) => string;
};
computedData: {
collection: false;
type: Klass<any>[];
required: false;
};
computed: {
required: false;
type: "function";
collection: false;
};
}>;
collection: true;
required: true;
constraints: {
eachNameUnique({ properties }: any): Atom<boolean>;
};
defaultValue(): never[];
};
isRef: {
required: true;
collection: false;
type: "boolean";
defaultValue: () => boolean;
};
}>;

// @public (undocumented)
export class Controller {
    constructor(system: System, entities: KlassInstance<typeof Entity, false>[], relations: KlassInstance<typeof Relation, false>[], activities: KlassInstance<typeof Activity, false>[], interactions: KlassInstance<typeof Interaction, false>[], states?: KlassInstance<typeof Property, false>[]);
    // (undocumented)
    activities: KlassInstance<typeof Activity, false>[];
    // Warning: (ae-forgotten-export) The symbol "ActivityCall" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    activityCalls: Map<string, ActivityCall>;
    // (undocumented)
    activityCallsByName: Map<string, ActivityCall>;
    // Warning: (ae-forgotten-export) The symbol "DataContext" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    addComputedDataHandle(computedData: KlassInstance<any, false>, host: DataContext["host"], id: DataContext["id"]): void;
    // (undocumented)
    callActivityInteraction(activityCallId: string, interactionCallId: string, activityId: string, interactionEventArgs: InteractionEventArgs): Promise<InteractionCallResponse>;
    // Warning: (ae-forgotten-export) The symbol "SystemCallback" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    callbacks: Map<any, Set<SystemCallback>>;
    // Warning: (ae-forgotten-export) The symbol "InteractionEventArgs" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "InteractionCallResponse" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    callInteraction(interactionId: string, interactionEventArgs: InteractionEventArgs): Promise<InteractionCallResponse>;
    // Warning: (ae-forgotten-export) The symbol "ComputedDataHandle" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    computedDataHandles: Set<ComputedDataHandle>;
    // (undocumented)
    createActivity(activityCallId: string): Promise<{
        activityId: any;
        state: ActivitySeqStateData;
    }>;
    // (undocumented)
    dispatch(event: any, ...args: any[]): Promise<void>;
    // (undocumented)
    entities: KlassInstance<typeof Entity, false>[];
    // (undocumented)
    globals: {
        BoolExp: typeof BoolExp;
    };
    // (undocumented)
    interactionCalls: Map<string, InteractionCall>;
    // Warning: (ae-forgotten-export) The symbol "InteractionCall" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    interactionCallsByName: Map<string, InteractionCall>;
    // (undocumented)
    interactions: KlassInstance<typeof Interaction, false>[];
    // (undocumented)
    listen(event: any, callback: SystemCallback): () => void;
    // (undocumented)
    relations: KlassInstance<typeof Relation, false>[];
    // (undocumented)
    setup(): Promise<void>;
    // (undocumented)
    states: KlassInstance<typeof Property, false>[];
    // Warning: (ae-forgotten-export) The symbol "System" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    system: System;
}

// @public (undocumented)
export type DataAPIThis = {
    system: Controller['system'];
    user: EventUser;
};

// @public (undocumented)
export const eventEntity: InertKlassInstance<    {
name: {
type: "string";
collection: false;
required: true;
constraints: {
nameFormat({ name }: {
name: Atom<string>;
}): Atom<boolean>;
};
};
computedData: {
type: Klass<any>[];
collection: false;
required: false;
};
properties: {
type: Klass<    {
name: {
type: "string";
required: true;
collection: false;
constraints: {
format({ name }: {
name: Atom<string>;
}): Atom<boolean>;
length({ name }: {
name: Atom<string>;
}): Atom<boolean>;
};
};
type: {
type: "string";
required: true;
collection: false;
options: PropertyTypes[];
};
collection: {
type: "boolean";
required: true;
collection: false;
defaultValue(): boolean;
};
args: {
computedType: (values: {
type: PropertyTypes;
}) => string;
};
computedData: {
collection: false;
type: Klass<any>[];
required: false;
};
computed: {
required: false;
type: "function";
collection: false;
};
}>;
collection: true;
required: true;
constraints: {
eachNameUnique({ properties }: any): Atom<boolean>;
};
defaultValue(): never[];
};
isRef: {
required: true;
collection: false;
type: "boolean";
defaultValue: () => boolean;
};
}>;

// @public (undocumented)
export class MonoSystem implements System {
    // Warning: (ae-forgotten-export) The symbol "Database" needs to be exported by the entry point index.d.ts
    constructor(db?: Database);
    // (undocumented)
    conceptClass: Map<string, ReturnType<typeof createClass>>;
    // (undocumented)
    createActivity(activity: any): Promise<any>;
    // (undocumented)
    getActivity(query?: MatchExpressionData): Promise<any[]>;
    // (undocumented)
    getEvent(query?: MatchExpressionData): Promise<InteractionEvent[]>;
    // Warning: (ae-forgotten-export) The symbol "InteractionEvent" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    saveEvent(event: InteractionEvent): Promise<any>;
    // (undocumented)
    setup(entities: KlassInstance<typeof Entity, false>[], relations: KlassInstance<typeof Relation, false>[]): any;
    // Warning: (ae-forgotten-export) The symbol "Storage_2" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    storage: Storage_2;
    // (undocumented)
    updateActivity(match: MatchExpressionData, activity: any): Promise<any>;
}

// @public (undocumented)
export class SQLiteDB implements Database {
    constructor(file?: string, options?: number | undefined);
    // (undocumented)
    close(): Promise<void>;
    // (undocumented)
    db: AsyncDatabase;
    // (undocumented)
    delete(sql: string, name?: string): Promise<any[]>;
    // (undocumented)
    file: string;
    // (undocumented)
    getAutoId(recordName: string): Promise<string>;
    // Warning: (ae-forgotten-export) The symbol "IDSystem" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    idSystem: IDSystem;
    // Warning: (ae-forgotten-export) The symbol "EntityIdRef" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    insert(sql: string, name?: string): Promise<EntityIdRef>;
    // (undocumented)
    open(): Promise<void>;
    // (undocumented)
    options?: number | undefined;
    // (undocumented)
    query<T extends any>(sql: string, name?: string): Promise<T[]>;
    // (undocumented)
    scheme(sql: string): Promise<RunResult>;
    // (undocumented)
    update(sql: string, idField?: string, name?: string): Promise<any[]>;
}

// Warning: (ae-forgotten-export) The symbol "ServerOptions" needs to be exported by the entry point index.d.ts
// Warning: (ae-forgotten-export) The symbol "DataAPIs" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export function startServer(controller: Controller, options: ServerOptions, dataAPIs?: DataAPIs): Promise<void>;

// @public (undocumented)
export const systemEntity: InertKlassInstance<    {
name: {
type: "string";
collection: false;
required: true;
constraints: {
nameFormat({ name }: {
name: Atom<string>;
}): Atom<boolean>;
};
};
computedData: {
type: Klass<any>[];
collection: false;
required: false;
};
properties: {
type: Klass<    {
name: {
type: "string";
required: true;
collection: false;
constraints: {
format({ name }: {
name: Atom<string>;
}): Atom<boolean>;
length({ name }: {
name: Atom<string>;
}): Atom<boolean>;
};
};
type: {
type: "string";
required: true;
collection: false;
options: PropertyTypes[];
};
collection: {
type: "boolean";
required: true;
collection: false;
defaultValue(): boolean;
};
args: {
computedType: (values: {
type: PropertyTypes;
}) => string;
};
computedData: {
collection: false;
type: Klass<any>[];
required: false;
};
computed: {
required: false;
type: "function";
collection: false;
};
}>;
collection: true;
required: true;
constraints: {
eachNameUnique({ properties }: any): Atom<boolean>;
};
defaultValue(): never[];
};
isRef: {
required: true;
collection: false;
type: "boolean";
defaultValue: () => boolean;
};
}>;

// @public (undocumented)
export const USER_ENTITY = "User";

// Warnings were encountered during analysis:
//
// Controller.ts:164:8 - (ae-forgotten-export) The symbol "ActivitySeqStateData" needs to be exported by the entry point index.d.ts
// server.ts:27:5 - (ae-forgotten-export) The symbol "EventUser" needs to be exported by the entry point index.d.ts

// (No @packageDocumentation comment for this package)

```
